---
title: November 25
description: Daily for November 25, 2025
sidebar:
  badge:
    text: Новое
    variant: tip
hero:
  # tagline: Андрей Соболев
  image: 
    file: ../../../../../assets/heros/hero008.png    
---
import { Image } from "astro:assets";

## Общее

* В выходные пробовал обновить продукт до Nodejs 24, так как вышла стабильная версия, и влип в интересное исследование, результаты чуть позже опубликую. В общем интересная тема, я уже давно замечал, но до сих пор не нашел понимания фигли так сделали то. Смотри в чем дело, платформа/Foundation достаточно большой проект, но не огромный, там около 465 javascript модулей, не сказать что сильно много, но уже и не мало чтобы ловить все эффекты :-)

Эффект первый, для сборки нужно запускать скрипты из package.json, а сборка у нас разбита на фазы, build -> транспиляция, typescript -> js, через esbuild. Очень быстро, было бы, если бы не бы :-)
validate -> typescript валидация
bundle -> сборка bundle.js для сервисов для которых это нужно
package -> сборка пакетов, через webpack
docker:build -> сборка докер образов для сервисов. 

Для оркестрации давно был выбран rush.js от M$soft, мать его. Давно руки чешутся от него избавиться, так как он внутри только пользует pnpm сейчас, и мы не какие его функции больше не используем.

В общем я давно замечал, что иной раз rush build, после обновления через rush update, вместо 10секунд работает минуту, но так и не докопался. А сейчас вроде бы докопался :-) Часа 3 мучил Claude Opus 4.5, она варианты перебирала, ну и тупит она иной раз, хотя код неплохой пишет. 

И в общем и целом, `pnpm install --force` когда отрабатывает, мы получаем где то 2.4 гигабайта новых как бы файлов, со старым контентом, но новыми инодами, и ОС тупо долго это все читает, запускает и тд.

Но это то ладно, я в виде эксперимента сделал вариант, когда сборка та же что делалась 10 секунд, работает за 1 секунду, если тупо делать это все в одном процессе а не вызывать кучу. Я не понимаю почему nodejs/javascript мир до сих пор не куда не ушел от этих тупых package.json и указания скриптов внутри них, просто ужас. В общем часть кода написано, часть еще предстоит, и буду оформлять в отдельный пакет, который можно будет пользовать как надо. И оно офигенно будет работать, по сравнению с обычным подходом. Тоже проделал с валидацией, и получил уже не такой выигрыш, конечно, но чуть лучше стало.


## Идеи

* А я чего в Nodejs24 то полез, мне надо было sqlite попробовать, захотелось попробовать переделать backup который в платформе на sqlite, а так как давно уже витает идея сделать all-in-one-foundation, когда просто качаешь приложение и работаешь локально, но локально нужно локальную базу, так что можно будет взять скачать все с сервера и продолжить работать локально, прикольно же :-)
